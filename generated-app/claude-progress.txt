CANOPY PROJECT MANAGEMENT APP - Progress Tracker
==================================================

CURRENT STATUS: Phase 4 Polish Complete - Full-Featured App
LAST UPDATED: 2026-02-27 (Session 3)

COMPLETED:
-----------
Phase 0: Monorepo Restructuring
- Root package.json with workspaces: [shared, backend, frontend, infrastructure]
- tsconfig.base.json with shared TypeScript config
- All workspace directories created

Phase 1: Shared Contract (@canopy/shared)
- All Zod schemas written (common, project, issue, sprint, board, comment, search)
- Types file with z.infer<> type exports
- Endpoints route map
- Compiles successfully: cd shared && npx tsc --noEmit

Phase 2a: CDK Infrastructure
- Stack: DynamoDB (single-table + 3 GSIs), Lambda (NodejsFunction), API Gateway HTTP API, S3+CloudFront
- All resources prefixed with canopy-
- CDK tests: 10/10 passing (snapshot + assertion tests)
- CDK synth: produces valid CloudFormation template
- Outputs: ApiUrl, FrontendBucketName, DistributionId, DistributionDomain

Phase 2b: Backend Lambda Handlers (Full)
- Router in backend/src/index.ts with pattern matching
- Full CRUD handlers: projects, issues, sprints, boards, comments, search
- DynamoDB helpers in backend/src/lib/db.ts
- Compiles successfully: cd backend && npx tsc --noEmit

Phase 3: Frontend (React 19 + Vite + Tailwind CSS v4)
- All pages: Dashboard, BoardView, BacklogView, SprintsView, RoadmapView,
  ReportsView (Burndown, Velocity, SprintReport), SettingsView, LabelsView, ComponentsView
- Components: TopNav, Sidebar, AppLayout, CreateIssueModal, IssueDetailPanel,
  SearchModal, Toast, KeyboardShortcuts, ErrorBoundary
- API client with VITE_API_URL + full localStorage fallback
- React Query hooks for all CRUD operations
- AppContext: theme, sidebar, project, issue selection, modals
- DnD: @dnd-kit integration on board view
- Design: Forest palette (#1B4332, #D4A373, #FAF9F6)
  Space Grotesk + DM Sans + JetBrains Mono
- Dark theme with proper class toggling
- Stagger animations, shimmer skeletons, smooth transitions
- Keyboard shortcuts: ⌘K search, ⌘[ sidebar, C create, ? shortcuts, Esc close
- Build: ~403KB JS + ~37KB CSS

Phase 4: Polish (Complete)
- ErrorBoundary component wrapping all routes
- Comment system in IssueDetailPanel (add/list)
- Connectivity indicator in TopNav (API/Local mode)
- Board column duplicate fix, column point totals
- Backlog: Move-to-sprint dropdown on issue rows
- BacklogView: Type/status filters, sort by manual/priority/newest, no page reload
- SprintsView: Inline editing (name/goal/dates), expandable issue list, date pickers
- SearchModal: Keyboard navigation (↑↓ Enter Esc), status badges
- RoadmapView: Gantt-style timeline, week/month headers, TODAY marker
- ReportsView: SVG burndown/velocity charts, sprint report with stats
- IssueDetailPanel: Sprint assignment, time tracking, inline editing, delete confirm
- CreateIssueModal: No-project warning, description field
- Dashboard: Description field, click-outside-to-close
- Sidebar: Fixed routes, improved active state
- KeyboardShortcuts dialog (? key)
- Dark mode across all views
- Accessibility: prefers-reduced-motion, focus-visible rings

VERIFICATION RESULTS (all PASS):
---------------------------------
Backend (5/5):
- shared-schemas-compile: PASS
- cdk-synth: PASS
- cdk-tests (10/10): PASS
- backend-compile: PASS
- frontend-build: PASS

E2E Tests (23/23):
- create-project: 3 tests
- full-workflow: 4 tests
- dark-mode: 3 tests
- screenshot-helper: 6 tests
- seed-screenshots: 5 tests
- roadmap-screenshot: 2 tests

CI/CD STATUS:
--------------
- SSM parameter /claude-code/infra/deploy-state: NOT FOUND (CI/CD not triggered)
- Attempted direct cdk deploy: blocked by IAM (no CDK bootstrap access)
- Frontend works fully with localStorage fallback
- All code pushed to agent-runtime branch (20 commits)
- If CI/CD deploys: extract API URL from SSM, write to frontend/.env as VITE_API_URL

COMMITS (20 total across 3 sessions):
--------------------------------------
Session 1:
1. be11a1e: feat: add shared API contract with Zod schemas
2. ca8e6a3: feat: add CDK infrastructure with stub handlers
3. eec8ddb: feat: implement backend Lambda handlers
4. 27cf0f1: feat: complete frontend with all views and API integration
5. 9d14acb: feat: add comprehensive E2E test suite and visual verification
6. 88bef3d: fix: dashboard welcome state and board column mapping
7. c49bbfe: feat: add dark mode support with theme toggle
8. c6cb26c: chore: update progress tracker

Session 2:
9. 2f185b4: feat: enhance roadmap timeline, burndown charts, issue detail panel
10. 3d83aa1: feat: enhance backlog with filters/sorting, fix sidebar routes
11. c2dd4a8: feat: add description field to project creation, improve modal UX
12. 4f7501d: chore: add roadmap screenshot test
13. e734575: feat: add keyboard navigation to search and sprint status badges
14. 6fef6c1: feat: board column point totals
15. dfc0a7d: feat: add keyboard shortcuts dialog

Session 3:
16. 4de4c8b: feat: add error boundary, comments, connectivity indicator
17. b7344d7: fix: replace page reload with query invalidation, improve create modal
18. 0682aff: feat: enhance sprints view with inline editing, date inputs
19. de147b6: feat: add move-to-sprint action on backlog issues

ARCHITECTURE:
--------------
generated-app/
├── package.json          (workspace root)
├── tsconfig.base.json
├── shared/               (Zod schemas, types, endpoints - compiles OK)
│   ├── schemas/          (project, issue, sprint, board, comment, search, common)
│   ├── types.ts          (z.infer<> type exports)
│   └── endpoints.ts      (API route map)
├── backend/              (Lambda handler with routing - compiles OK)
│   └── src/
│       ├── index.ts      (router)
│       ├── handlers/     (projects, issues, sprints, boards, comments, search)
│       └── lib/db.ts     (DynamoDB helpers)
├── infrastructure/       (CDK stack - synths OK, 10/10 tests pass)
│   ├── lib/canopy-stack.ts
│   ├── bin/canopy.ts
│   └── test/canopy-stack.test.ts
├── frontend/             (React SPA - builds OK, dev server on port 6174)
│   └── src/
│       ├── api/client.ts         (API + localStorage fallback)
│       ├── hooks/useApi.ts       (React Query hooks)
│       ├── context/AppContext.tsx (global state)
│       ├── pages/                (11 page components)
│       ├── components/           (layout, issues, search, ui)
│       └── lib/utils.ts          (helpers)
└── e2e-tests/            (Playwright tests - 23/23 pass)

DynamoDB Single-Table Design:
- PK/SK composite keys
- GSI1: project queries (PROJ#id -> ISSUE#status#order, SPRINT#status#time)
- GSI2: assignee queries (USER#id -> updatedAt)
- GSI3: sprint queries (SPRINT#id -> sortOrder)

API Routes (Lambda router):
- POST/GET /projects, GET/PUT/DELETE /projects/:id
- POST/GET /projects/:id/issues
- GET/PUT/DELETE /issues/:id, PUT /issues/bulk
- POST /issues/:id/comments
- POST/GET /projects/:id/sprints, PUT /sprints/:id
- GET /projects/:id/board, PUT /boards/:id
- GET /search

WHAT'S LEFT (Nice-to-haves):
-----------------------------
- [ ] Wire VITE_API_URL once CI/CD deploys (if it ever triggers)
- [ ] Verify deployed API endpoints with curl
- [ ] Real comment persistence via API
- [ ] Drag-and-drop between sprint and backlog sections
- [ ] Activity log / audit trail
